<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <meta name="description" content="">
    <meta name="author" content="">
    <meta property="wb:webmaster" content="3caf5a5b94e6991e" />
    
    <link rel="shortcut icon" href="../template/coolblue/images/chine.ico"/>
    
    <title> 数组和指针 | winoi</title>
    
    <link type="text/css" rel="stylesheet" href="../template/coolblue/css/bootstrap.min.css"><link>
    <link rel="stylesheet" type="text/css" media="screen" href="../template/coolblue/css/coolblue.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="../template/coolblue/css/chine.css" />
    
    <script src="../template/coolblue/js/jquery-1.7.2.min.js"></script>
    <script src="../template/coolblue/js/scrollToTop.js"></script>
    <script src="../template/coolblue/js/inputFocusOrBlur.js"></script>
    <script src="../template/coolblue/js/jquery.form.js"></script> 
    <script src="../template/coolblue/js/bootstrap-transition.js"></script> 
    <script src="../template/coolblue/js/bootstrap-tooltip.js"></script>
    <script src="../template/coolblue/js/bootstrap-modal.js"></script> 
    <script src="../template/coolblue/js/subscribe.js"></script> 
    
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    
    
</head>
<body id="top">
    
    <!--header -->
<div id="header-wrap"><header>
    <hgroup>
        <h1>数组和指针</h1>
    </hgroup>

    <nav>
        <ul>
            <li><a href="http://www.winoi.com">首页</a><span></span></li>
            <li id="current"><a href="../index.html">笔记目录</a><span></span></li>
            <li><a href="../about.html">关于</a><li>
        </ul>
    </nav>

<!--/header-->
</header></div>

    
    <!-- content-wrap -->
    <div id="content-wrap">
        <!-- content -->
        <div id="content" class="clearfix">
    &nbsp;
           
<h1 id="toc_1"> 数组</h1>
<p>
数组的长度是固定的!
定义方法:
</p>
<blockquote>
int a[] = {1,2,3};//显示初始化时,可以省略维数(编译器确定数组长度) 
int a[4] = {1,2}; //只初始化a[0],a[1]. a[2],a[3]不会初始化(函数体内)或者初始化为0(函数体外)
如果是类类型,自动调用默认构造函数初始化
</blockquote>
<p>
存放a[5]的地址和a[4]的地址是连续的,不管a[5]的位置上存放的是什么,都以int的形式的读出.
访问:
</p>
<blockquote>
a[0] 等同 *(a)
a[1] 等同 *(a+1)
</blockquote>

<h1 id="toc_2"> 字符数组,有点特殊</h1>
<p>
字符数组还可以用字符串字面值初始化,即:
</p>
<blockquote>
char a[] = "C++";
</blockquote>
<p>
这个数组的维数是4而不是3,因为自动在结尾添加'\0'(null)
</p>

<p>
还可以这样表示:(C风格字符串)
</p>
<blockquote>
char *a = "C++";
</blockquote>

<p>
当数组的类型是char时,a不代表指针,而是字符串.而数组的类型是其他(如int a[]),a代表第一个元素的指针.
</p>
<h1 id="toc_3"> 一个区别</h1>
<blockquote>
string s = "abc";
string *sp = &amp;s; //把string对象s的地址附给sp
cout&lt;&lt;*sp&lt;&lt;endl; //得到"abc"
*sp = "A new word";//把sp指向的内容用字符串字面值替代
cout&lt;&lt;*sp&lt;&lt;endl; //得到"A new word"
</blockquote>
<h1 id="toc_4"> C风格字符串</h1>
<p>
在c++中用c风格字符串常常带来错误,因此不提倡.
</p>

<p>
C风格字符串是以空字符null结尾的字符数组.通过(const)char*类型的指针操纵C风格字符串
</p>

<p>
纠正一个认识:(const)char*是一种类型,它代表字符串,类似string.C风格字符串通过指针操纵字符串,但不是每个元素都有一个指针.字符串只有一个指针,通过增1操作遍历字符串.
</p>
<pre>
#include&lt;iostream&gt;
using namespace std;
int main()
{
    char *a="abc";
    char b[]="abc";
    int c[]={1,2,3};
    for(int i=0;i&lt;3;i++)
    {
        cout&lt;&lt;*(a+i)&lt;&lt;endl;
        cout&lt;&lt;*(b+i)&lt;&lt;endl;
        cout&lt;&lt;*(c+i)&lt;&lt;endl;
    }
        cout&lt;&lt;"###"&lt;&lt;endl;
    for(int i=0;i&lt;3;i++)
    {
        cout&lt;&lt;a&lt;&lt;endl;
        cout&lt;&lt;b&lt;&lt;endl;
        cout&lt;&lt;c&lt;&lt;endl;
    }
}
</pre>
<p>
输出:
</p>
<pre>
a
a
1
b
b
2
c
c
3
###
abc
abc
0x7fff71f6fb80
abc
abc
0x7fff71f6fb80
abc
abc
0x7fff71f6fb80
</pre>
<h1 id="toc_5"> 不要忘记字符串结束符null</h1>
<p>
标准库函数(#include&lt;cstring&gt;)是string.h头文件的c++版本
</p>
<blockquote>
char a[]={'c','+','+'};
cout&lt;&lt;strlen(a)&lt;&lt;endl;//disaster:a is not null-terminated
标准库函数总是假定其参数字符串以null结尾 
</blockquote>

<h1 id="toc_6"> 新旧代码的兼容</h1>
<p>
C风格字符串与字符串字面值有相同的数据结构,而且都以null结束,因此可以互相代替.
</p>
<blockquote>
const char *a="abc";
string b(a);
</blockquote>
 
        <div>
   <div>

<!-- footer -->
<footer>
    <p class="footer-left">
        &copy; 2013 Copyright Info &nbsp; &nbsp; &nbsp;
         powered by <a href="http://www.vim.org/scripts/script.php?script_id=2226", target="_blank">vimwiki</a>
    </p>

    <p class="footer-right">
        <a href="../index.html">Home</a> |
        <a href="#top" class="back-to-top">Back to Top</a>
    </p>
<!-- /footer -->
</footer>

</body>
