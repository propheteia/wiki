<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <meta name="description" content="">
    <meta name="author" content="">
    <meta property="wb:webmaster" content="3caf5a5b94e6991e" />
    
    <link rel="shortcut icon" href="../template/coolblue/images/chine.ico"/>
    
    <title> Linux系统的Shell I/O重定向详解 | winoi</title>
    
    <link type="text/css" rel="stylesheet" href="../template/coolblue/css/bootstrap.min.css"><link>
    <link rel="stylesheet" type="text/css" media="screen" href="../template/coolblue/css/coolblue.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="../template/coolblue/css/chine.css" />
    
    <script src="../template/coolblue/js/jquery-1.7.2.min.js"></script>
    <script src="../template/coolblue/js/scrollToTop.js"></script>
    <script src="../template/coolblue/js/inputFocusOrBlur.js"></script>
    <script src="../template/coolblue/js/jquery.form.js"></script> 
    <script src="../template/coolblue/js/bootstrap-transition.js"></script> 
    <script src="../template/coolblue/js/bootstrap-tooltip.js"></script>
    <script src="../template/coolblue/js/bootstrap-modal.js"></script> 
    <script src="../template/coolblue/js/subscribe.js"></script> 
    
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    
    
</head>
<body id="top">
    
    <!--header -->
<div id="header-wrap"><header>
    <hgroup>
        <h1>Linux系统的Shell I/O重定向详解</h1>
    </hgroup>

    <nav>
        <ul>
            <li><a href="http://www.winoi.com">首页</a><span></span></li>
            <li id="current"><a href="../index.html">笔记目录</a><span></span></li>
            <li><a href="../about.html">关于</a><li>
        </ul>
    </nav>

<!--/header-->
</header></div>

    
    <!-- content-wrap -->
    <div id="content-wrap">
        <!-- content -->
        <div id="content" class="clearfix">
    &nbsp;
           
<h2 id="toc_0.1"> 基本概念</h2>
<ul>
<li>
I/O重定向通常与 FD有关，shell的FD通常为10个，即 0～9；

<li>
常用FD有3个，为0（stdin，标准输入）、1（stdout，标准输出）、2（stderr，标准错误输出），默认与keyboard、monitor、monitor有关；

<li>
用 &lt; 来改变读进的数据信道(stdin)，使之从指定的档案读进；

<li>
用 &gt; 来改变送出的数据信道(stdout, stderr)，使之输出到指定的档案；

<li>
0 是 &lt; 的默认值，因此 &lt; 与 0&lt;是一样的；同理，&gt; 与 1&gt; 是一样的；

<li>
在IO重定向 中，stdout 与 stderr 的管道会先准备好，才会从 stdin 读进资料；

<li>
管道“|”(pipe line):上一个命令的 stdout 接到下一个命令的 stdin;

<li>
tee 命令是在不影响原本 I/O 的情况下，将 stdout 复制一份到档案去;

<li>
bash（ksh）执行命令的过程：分析命令－变量求值－命令替代（``和$( )）－重定向－通配符展开－确定路径－执行命令；( ) 将 command group 置于 sub-shell 去执行，也称 nested sub-shell，它有一点非常重要的特性是：继承父shell的Standard input, output, and error plus any other open file descriptors。

<li>
exec 命令：常用来替代当前 shell 并重新启动一个 shell，换句话说，并没有启动子 shell。使用这一命令时任何现有环境都将会被清除。exec 在对文件描述符进行操作的时候，也只有在这时，exec 不会覆盖你当前的 shell 环境。 

</ul>

<h2 id="toc_0.2"> 基本IO</h2>
<ul>
<li>
cmd &gt; file 把 stdout 重定向到 file 文件中；

<li>
cmd &gt;&gt; file 把 stdout 重定向到 file 文件中(追加)；

<li>
cmd 1&gt; file 把 stdout 重定向到 file 文件中；

<li>
cmd &gt; file 2&gt;&amp;1 把 stdout 和 stderr 一起重定向到 file 文件中；

<li>
cmd 2&gt; file 把 stderr 重定向到 file 文件中；

<li>
cmd 2&gt;&gt; file 把 stderr 重定向到 file 文件中(追加)；

<li>
cmd &gt;&gt; file 2&gt;&amp;1 把 stderr 和 stderr 一起重定向到 file 文件中(追加)；

<li>
cmd &lt; file &gt;file2 cmd 命令以 file 文件作为 stdin，以 file2 文件作为 stdout；

<li>
cat &lt;&gt;file 以读写的方式打开 file；

<li>
cmd &lt; file cmd 命令以 file 文件作为 stdin；

<li>
cmd &lt;&lt; delimiter Here document，从 stdin 中读入，直至遇到 delimiter 分界符。 

</ul>

<h2 id="toc_0.3"> 进阶IO</h2>
<ul>
<li>
&gt;&amp;n 使用系统调用 dup (2) 复制文件描述符 n 并把结果用作标准输出；

<li>
&lt;&amp;n 标准输入复制自文件描述符 n；

<li>
&lt;&amp;- 关闭标准输入（键盘）；

<li>
&gt;&amp;- 关闭标准输出；

<li>
n&lt;&amp;- 表示将 n 号输入关闭；

<li>
n&gt;&amp;- 表示将 n 号输出关闭；

</ul>
<p>
上述所有形式都可以前导一个数字，此时建立的文件描述符由这个数字指定而不是缺省的 0 或 1。如：
... 2&gt;file 运行一个命令并把错误输出(文件描述符 2)定向到 file。
... 2&gt;&amp;1 运行一个命令并把它的标准输出和输出合并。(严格的说是通过复制文件描述符 1 来建立文件描述符 2 ，但效果通常是合并了两个流。)
</p>

<p>
我们对 2&gt;&amp;1详细说明一下 ：2&gt;&amp;1 也就是 FD2＝FD1 ，这里并不是说FD2 的值 等于FD1的值，因为 &gt; 是改变送出的数据信道，也就是说把 FD2 的 “数据输出通道” 改为 FD1 的 “数据输出通道”。如果仅仅这样，这个改变好像没有什么作用，因为 FD2 的默认输出和 FD1的默认输出本来都是 monitor，一样的！ 但是，当 FD1 是其他文件，甚至是其他 FD 时，这个就具有特殊的用途了。请大家务必理解这一点。 
</p>

<p>
<a href="http://cloudbbs.org/forum.php?mod=viewthread&amp;tid=15515">一些例子</a>
</p>
 
        <div>
   <div>

<!-- footer -->
<footer>
    <p class="footer-left">
        &copy; 2013 Copyright Info &nbsp; &nbsp; &nbsp;
         powered by <a href="http://www.vim.org/scripts/script.php?script_id=2226", target="_blank">vimwiki</a>
    </p>

    <p class="footer-right">
        <a href="../index.html">Home</a> |
        <a href="#top" class="back-to-top">Back to Top</a>
    </p>
<!-- /footer -->
</footer>

</body>
